<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ecotoxicological information from the standartox database • standartox</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Ecotoxicological information from the standartox database">
<meta property="og:description" content="The &lt;standartox.uni-landau.de&gt; database offers cleaned,
    harmonized and aggregated ecotoxicological test data, which can
    be used for assessing effects and risks of chemical concentrations
    found in the environment.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">standartox</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9012</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/andschar/standartox/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="standartox" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#standartox" class="anchor"></a>Standartox</h1></div>

<p>Standartox is a database and tool facilitating the retrieval of ecotoxicological test data. It is based on the <a href="https://cfpub.epa.gov/ecotox/">EPA ECOTOX database</a> as well as on data from several other chemical databases and allows users to filter and aggregate ecotoxicological test data in an easy way. It can either be accessed via <a href="http://standartox.uni-landau.de" class="uri">http://standartox.uni-landau.de</a> or this R-package <a href="https://github.com/andschar/standartox">standartox</a>. Ecotoxicological test data is used in environmental risk assessment to calculate effect measures such as <a href="https://en.wikipedia.org/wiki/Toxic_unit">TU - Toxic Units</a> or <a href="https://edild.github.io/ssd/">SSD - Species Sensitivity Distributions</a> to asses environmental toxicity of chemicals.</p>
<p>The project lives in two repositories:</p>
<ul>
<li>
<a href="https://github.com/andschar/standartox-build">standartox-build</a> - Compiles and serves database</li>
<li>
<a href="https://github.com/andschar/standartox">standartox</a> - R-package</li>
</ul>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co"># install.packages('remotes')</span>
<span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/remotes/man/install_github.html">install_github</a></span>(<span class="st">'andschar/standartox'</span>) <span class="co"># package not yet on CRAN</span></pre></div>
</div>
<div id="functions" class="section level2">
<h2 class="hasAnchor">
<a href="#functions" class="anchor"></a>Functions</h2>
<p>Standartox consists of the two functions <code><a href="reference/stx_catalog.html">stx_catalog()</a></code> and <code><a href="reference/stx_query.html">stx_query()</a></code>. The former allows you to retrieve a catalog of possible parameters that can be used as an input for <code><a href="reference/stx_query.html">stx_query()</a></code>. The latter fetches toxicity values from the database.</p>
<div id="stx_catalog" class="section level3">
<h3 class="hasAnchor">
<a href="#stx_catalog" class="anchor"></a><code>stx_catalog()</code>
</h3>
<p>The function returns a list of all possible arguments that can bes use in <code><a href="reference/stx_query.html">stx_query()</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">standartox</span>)
<span class="no">catal</span> <span class="kw">=</span> <span class="fu"><a href="reference/stx_catalog.html">stx_catalog</a></span>()
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">catal</span>)</pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co">##  [1] "vers"               "casnr"              "cname"             </span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">##  [4] "concentration_unit" "concentration_type" "chemical_role"     </span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">##  [7] "chemical_class"     "taxa"               "trophic_lvl"       </span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">## [10] "habitat"            "region"             "ecotox_grp"        </span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">## [13] "duration"           "effect"             "endpoint"          </span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">## [16] "exposure"</span></a></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="r"><span class="no">catal</span>$<span class="no">endpoint</span> <span class="co"># access the parameter endpoint</span></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">variable</th>
<th align="right">n</th>
<th align="right">n_total</th>
<th align="right">perc</th>
<th align="left">name_perc</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">NOEX</td>
<td align="right">215089</td>
<td align="right">561258</td>
<td align="right">39</td>
<td align="left">NOEX (39%)</td>
</tr>
<tr class="even">
<td align="left">LOEX</td>
<td align="right">174291</td>
<td align="right">561258</td>
<td align="right">32</td>
<td align="left">LOEX (32%)</td>
</tr>
<tr class="odd">
<td align="left">XX50</td>
<td align="right">171878</td>
<td align="right">561258</td>
<td align="right">31</td>
<td align="left">XX50 (31%)</td>
</tr>
</tbody>
</table>
</div>
<div id="stx_query" class="section level3">
<h3 class="hasAnchor">
<a href="#stx_query" class="anchor"></a><code>stx_query()</code>
</h3>
<p>The function allows you to retrieve filtered and aggregated toxicity data according to the parameters below.</p>
<table class="table">
<thead><tr class="header">
<th align="left">parameter</th>
<th align="left">example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">vers</td>
<td align="left">20190912</td>
</tr>
<tr class="even">
<td align="left">casnr</td>
<td align="left">50000, 95716, 95727</td>
</tr>
<tr class="odd">
<td align="left">cname</td>
<td align="left">2291, 4, 3</td>
</tr>
<tr class="even">
<td align="left">concentration_unit</td>
<td align="left">ug/l, mg/kg, g/m2</td>
</tr>
<tr class="odd">
<td align="left">concentration_type</td>
<td align="left">active ingredient, formulation, total</td>
</tr>
<tr class="even">
<td align="left">chemical_role</td>
<td align="left">pesticide, herbicide, insecticide</td>
</tr>
<tr class="odd">
<td align="left">chemical_class</td>
<td align="left">amide, aromatic, organochlorine</td>
</tr>
<tr class="even">
<td align="left">taxa</td>
<td align="left">Fusarium oxysporum, Oncorhynchus clarkii, Apis mellifera</td>
</tr>
<tr class="odd">
<td align="left">trophic_lvl</td>
<td align="left">heterotroph, autotroph</td>
</tr>
<tr class="even">
<td align="left">habitat</td>
<td align="left">freshwater, marine, terrestrial</td>
</tr>
<tr class="odd">
<td align="left">region</td>
<td align="left">europe, america_north, america_south</td>
</tr>
<tr class="even">
<td align="left">ecotox_grp</td>
<td align="left">Invertebrate, Plant, Fungi</td>
</tr>
<tr class="odd">
<td align="left">duration</td>
<td align="left">24, 96</td>
</tr>
<tr class="even">
<td align="left">effect</td>
<td align="left">Mortality, Population, Biochemistry</td>
</tr>
<tr class="odd">
<td align="left">endpoint</td>
<td align="left">NOEX, LOEX, XX50</td>
</tr>
<tr class="even">
<td align="left">exposure</td>
<td align="left">aquatic, environmental, diet</td>
</tr>
</tbody>
</table>
<p>You can type in parameters manually or subset the object returned by <code><a href="reference/stx_catalog.html">stx_catalog()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">standartox</span>)
<span class="no">cas</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">Copper2Sulfate</span> <span class="kw">=</span> <span class="st">'7758-98-7'</span>,
        <span class="kw">Permethrin</span> <span class="kw">=</span> <span class="st">'52645-53-1'</span>,
        <span class="kw">Imidacloprid</span> <span class="kw">=</span> <span class="st">'138261-41-3'</span>)
<span class="co"># query</span>
<span class="no">l</span> <span class="kw">=</span> <span class="fu"><a href="reference/stx_query.html">stx_query</a></span>(<span class="kw">cas</span> <span class="kw">=</span> <span class="no">cas</span>,
              <span class="kw">endpoint</span> <span class="kw">=</span> <span class="st">'XX50'</span>,
              <span class="kw">taxa</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span>(<span class="st">'Oncorhynchus'</span>, <span class="no">catal</span>$<span class="no">taxa</span>$<span class="no">variable</span>, <span class="kw">value</span> <span class="kw">=</span> <span class="fl">TRUE</span>), <span class="co"># fish genus</span>
              <span class="kw">exposure</span> <span class="kw">=</span> <span class="st">'aquatic'</span>,
              <span class="kw">duration</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">24</span>, <span class="fl">120</span>))</pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co">## Standartox query running..</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">## Parameters:</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">## casnr: 7758-98-7, 52645-53-1, 138261-41-3</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">## duration: 24, 120</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">## endpoint: XX50</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">## exposure: aquatic</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">## taxa: Oncorhynchus clarkii, Oncorhynchus gilae, Oncorhynchus mykiss, Oncorhy...[truncated]</span></a></code></pre></div>
<div id="important-parameter-settings" class="section level4">
<h4 class="hasAnchor">
<a href="#important-parameter-settings" class="anchor"></a>Important parameter settings</h4>
<ul>
<li>
<strong>CAS</strong> (<code>cas =</code>) Can be input in the form of 7758-98-7 or 7758987</li>
<li>
<strong>Endpoints</strong> (<code>endpoint =</code>) Only one endpoint per query is allowed:
<ul>
<li>
<code>NOEX</code> summarises <a href="https://en.wikipedia.org/wiki/No-observed-adverse-effect_level">No observed effect concentration/level</a> (i.e. NOEC, NOEL, NOAEL, etc.)</li>
<li>
<code>LOEX</code> summarises Lowest observed effects concentration (i.e. LOEC, LOEL, etc.)</li>
<li>
<code>XX50</code> summarises <a href="https://en.wikipedia.org/wiki/EC50">Half maximal effective concentration</a> (i.e. EC50, LC50, LD50 etc.)</li>
</ul>
</li>
<li>If you leave a parameter empty Standartox will not filter for it</li>
</ul>
</div>
</div>
</div>
<div id="query-result" class="section level2">
<h2 class="hasAnchor">
<a href="#query-result" class="anchor"></a>Query result</h2>
<p>Standartox returns a list object with five entries.</p>
<ul>
<li>
<code>l$filtred</code> and <code>l$filtered_all</code> contain the filtered Standartox data set (the former only is a shorter and more concise version of the latter):</li>
</ul>
<table class="table">
<thead><tr class="header">
<th align="left">cas</th>
<th align="left">cname</th>
<th align="right">concentration</th>
<th align="left">concentration_unit</th>
<th align="left">effect</th>
<th align="left">endpoint</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">7758-98-7</td>
<td align="left">cupric sulfate</td>
<td align="right">1100.0</td>
<td align="left">ug/l</td>
<td align="left">Mortality</td>
<td align="left">XX50</td>
</tr>
<tr class="even">
<td align="left">7758-98-7</td>
<td align="left">cupric sulfate</td>
<td align="right">18.9</td>
<td align="left">ug/l</td>
<td align="left">Mortality</td>
<td align="left">XX50</td>
</tr>
<tr class="odd">
<td align="left">7758-98-7</td>
<td align="left">cupric sulfate</td>
<td align="right">46.4</td>
<td align="left">ug/l</td>
<td align="left">Mortality</td>
<td align="left">XX50</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p><code>l$aggregated</code> contains the several aggregates of the Standartox data:</p>
<ul>
<li>
<code>cname</code>, <code>cas</code> - chemical identifiers</li>
<li>
<code>min</code> - Minimum</li>
<li>
<code>tax_min</code> - Most sensitive taxon</li>
<li>
<strong><code>gmn</code></strong> - <strong>Geometric mean</strong>
</li>
<li>
<code>amn</code> - Arithmetic mean</li>
<li>
<code>sd</code> - Standard Deviation of the arithmetic mean</li>
<li>
<code>max</code> - Maximum</li>
<li>
<code>tax_max</code> - Most insensitive taxon</li>
<li>
<code>n</code> - Number of distinct taxa used for the aggregation</li>
<li>
<code>tax_all</code> - Concatenated string of all taxa used for the aggregation</li>
</ul>
</li>
</ul>
<table class="table">
<colgroup>
<col width="17%">
<col width="13%">
<col width="15%">
<col width="25%">
<col width="15%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="left">cname</th>
<th align="left">cas</th>
<th align="right">min</th>
<th align="left">tax_min</th>
<th align="right">gmn</th>
<th align="right">max</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">cupric sulfate</td>
<td align="left">7758-98-7</td>
<td align="right">6.813740e+01</td>
<td align="left">Oncorhynchus clarkii</td>
<td align="right">1.330055e+02</td>
<td align="right">263.6153</td>
</tr>
<tr class="even">
<td align="left">imidacloprid</td>
<td align="left">138261-41-3</td>
<td align="right">2.291000e+05</td>
<td align="left">Oncorhynchus mykiss</td>
<td align="right">2.291000e+05</td>
<td align="right">229100.0000</td>
</tr>
<tr class="odd">
<td align="left">permethrin</td>
<td align="left">52645-53-1</td>
<td align="right">1.896481e+00</td>
<td align="left">Oncorhynchus gilae</td>
<td align="right">4.505877e+00</td>
<td align="right">17.0000</td>
</tr>
</tbody>
</table>
<ul>
<li>
<code>l$id</code> contains important data identifiers:
<ul>
<li>
<code>cname</code>, <code>cas</code>
</li>
<li>
<code>inchikey</code>, <code>inchi</code>
</li>
<li>
<code>result_id</code> - result ID from the underlying data source (i.e. EPA)</li>
<li>
<code>species_number</code> - taxon ID from the underlying data source (i.e. EPA)</li>
<li>
<code>ref_number</code> - reference ID from the underlying data source (i.e. EPA)</li>
</ul>
</li>
</ul>
<table class="table">
<colgroup>
<col width="7%">
<col width="5%">
<col width="68%">
<col width="5%">
<col width="7%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="left">cname</th>
<th align="left">cas</th>
<th align="left">inchi</th>
<th align="right">result_id</th>
<th align="right">species_number</th>
<th align="right">ref_number</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">cupric sulfate</td>
<td align="left">7758-98-7</td>
<td align="left">1S/Cu.H2O4S/c;1-5(2,3)4/h;(H2,1,2,3,4)/q+2;/p-2</td>
<td align="right">114026</td>
<td align="right">4</td>
<td align="right">104</td>
</tr>
<tr class="even">
<td align="left">imidacloprid</td>
<td align="left">138261-41-3</td>
<td align="left">1S/C9H10ClN5O2/c10-8-2-1-7(5-12-8)6-14-4-3-11-9(14)13-15(16)17/h1-2,5H,3-4,6H2,(H,11,13)</td>
<td align="right">2109867</td>
<td align="right">4</td>
<td align="right">344</td>
</tr>
<tr class="odd">
<td align="left">permethrin</td>
<td align="left">52645-53-1</td>
<td align="left">1S/C21H20Cl2O3/c1-21(2)17(12-18(22)23)19(21)20(24)25-13-14-7-6-10-16(11-14)26-15-8-4-3-5-9-15/h3-12,17,19H,13H2,1-2H3/t17-,19-/m0/s1</td>
<td align="right">2103751</td>
<td align="right">4</td>
<td align="right">344</td>
</tr>
</tbody>
</table>
<ul>
<li>
<code>l$meta</code> contains meta information on the request:</li>
</ul>
<table class="table">
<thead><tr class="header">
<th align="left">variable</th>
<th align="left">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">accessed</td>
<td align="left">2020-04-22 11:59:43</td>
</tr>
<tr class="even">
<td align="left">standartox_version</td>
<td align="left">20191212</td>
</tr>
</tbody>
</table>
</div>
<div id="example-oncorhynchus" class="section level2">
<h2 class="hasAnchor">
<a href="#example-oncorhynchus" class="anchor"></a>Example: <em>Oncorhynchus</em>
</h2>
<p>Let’s say, we want to retrieve the 20 most tested chemicals on the genus <em><a href="https://en.wikipedia.org/wiki/Oncorhynchus">Oncorhynchus</a></em>. We allow for test durations between 48 and 120 hours and want the tests restricted to active ingredients only. Since we are only interested in the half maximal effective concentration, we choose XX50 as our endpoint. As an aggregation method we choose the geometric mean.</p>
<div class="sourceCode" id="cb7"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">standartox</span>)
<span class="no">l2</span> <span class="kw">=</span> <span class="fu"><a href="reference/stx_query.html">stx_query</a></span>(<span class="kw">concentration_type</span> <span class="kw">=</span> <span class="st">'active ingredient'</span>,
               <span class="kw">endpoint</span> <span class="kw">=</span> <span class="st">'XX50'</span>,
               <span class="kw">taxa</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span>(<span class="st">'Oncorhynchus'</span>, <span class="no">catal</span>$<span class="no">taxa</span>$<span class="no">variable</span>, <span class="kw">value</span> <span class="kw">=</span> <span class="fl">TRUE</span>), <span class="co"># fish genus</span>
               <span class="kw">duration</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">48</span>, <span class="fl">120</span>))</pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co">## Standartox query running..</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">## Parameters:</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">## concentration_type: active ingredient</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">## duration: 48, 120</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">## endpoint: XX50</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">## taxa: Oncorhynchus clarkii, Oncorhynchus gilae, Oncorhynchus mykiss, Oncorhy...[truncated]</span></a></code></pre></div>
<p>We subset the retrieved data to the 20 most tested chemicals and plot the result.</p>
<div class="sourceCode" id="cb9"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">data.table</span>)
<span class="no">dat</span> <span class="kw">=</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/merge.html">merge</a></span>(<span class="no">l2</span>$<span class="no">filtered</span>, <span class="no">l2</span>$<span class="no">aggregated</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'cas'</span>, <span class="st">'cname'</span>))
<span class="no">cas20</span> <span class="kw">=</span> <span class="no">l2</span>$<span class="no">aggregated</span>[ <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span>(-<span class="no">n</span>), <span class="no">cas</span> ][<span class="fl">1</span>:<span class="fl">20</span>]
<span class="no">dat</span> <span class="kw">=</span> <span class="no">dat</span>[ <span class="no">cas</span> <span class="kw">%in%</span> <span class="no">cas20</span> ]</pre></div>
<div class="sourceCode" id="cb10"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">ggplot2</span>)
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="no">dat</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">y</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span>(<span class="no">cname</span>, -<span class="no">gmn</span>))) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">concentration</span>, <span class="kw">col</span> <span class="kw">=</span> <span class="st">'All values'</span>),
             <span class="kw">pch</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.3</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">gmn</span>, <span class="kw">col</span> <span class="kw">=</span> <span class="st">'Standartox value\n(Geometric mean)'</span>),
             <span class="kw">size</span> <span class="kw">=</span> <span class="fl">3</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_log10</a></span>(<span class="kw">breaks</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">100</span>, <span class="fl">1000</span>, <span class="fl">10000</span>),
                <span class="kw">labels</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">100</span>, <span class="fl">1000</span>, <span class="fl">10000</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_color_viridis_d</a></span>(<span class="kw">name</span> <span class="kw">=</span> <span class="st">''</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">'Oncorhynchus EC50 values'</span>,
       <span class="kw">subtitle</span> <span class="kw">=</span> <span class="st">'20 most tested chemicals'</span>,
       <span class="kw">x</span> <span class="kw">=</span> <span class="st">'Concentration (ppb)'</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span>() +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="kw">axis.title.y</span> <span class="kw">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span>())</pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-13-1.png"><!-- --></p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>We ask you to use the API service thoughtfully, which means to run the <code><a href="reference/stx_query.html">stx_query()</a></code> only once and to re-run it only when parameters change or you want to query new versions. Here is an example of how to easily store the queried data locally from within R.</p>
<div class="sourceCode" id="cb11"><pre class="r"><span class="no">run</span> <span class="kw">=</span> <span class="fl">FALSE</span> <span class="co"># set to TRUE for the first run</span>
<span class="kw">if</span> (<span class="no">run</span>) {
  <span class="no">l2</span> <span class="kw">=</span> <span class="fu"><a href="reference/stx_query.html">stx_query</a></span>(<span class="kw">concentration_type</span> <span class="kw">=</span> <span class="st">'active ingredient'</span>,
                 <span class="kw">endpoint</span> <span class="kw">=</span> <span class="st">'XX50'</span>,
                 <span class="kw">taxa</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span>(<span class="st">'Oncorhynchus'</span>, <span class="no">catal</span>$<span class="no">taxa</span>$<span class="no">variable</span>, <span class="kw">value</span> <span class="kw">=</span> <span class="fl">TRUE</span>), <span class="co"># fish genus</span>
                 <span class="kw">duration</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">48</span>, <span class="fl">120</span>))
  <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span>(<span class="no">l2</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="st">'path/to/directory'</span>, <span class="st">'data.rds'</span>))

} <span class="kw">else</span> {
  <span class="no">l2</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="st">'path/to/directory'</span>, <span class="st">'data.rds'</span>))
}

<span class="co"># put rest of the script here</span>
<span class="co"># ...</span></pre></div>
</div>
<div id="article" class="section level2">
<h2 class="hasAnchor">
<a href="#article" class="anchor"></a>Article</h2>
<p>The article on Standartox is currently work in progress and will be, once published linked here.</p>
</div>
<div id="information" class="section level2">
<h2 class="hasAnchor">
<a href="#information" class="anchor"></a>Information</h2>
<div id="contributors" class="section level3">
<h3 class="hasAnchor">
<a href="#contributors" class="anchor"></a>Contributors</h3>
<ul>
<li><a href="https://andschar.github.io">Andreas Scharmüller</a></li>
</ul>
</div>
<div id="want-to-contribute" class="section level3">
<h3 class="hasAnchor">
<a href="#want-to-contribute" class="anchor"></a>Want to contribute?</h3>
<p>Check out our <a href="https://github.com/andschar/standartox/blob/master/CONTRIBUTING.md">contribution guide here</a>.</p>
</div>
<div id="meta" class="section level3">
<h3 class="hasAnchor">
<a href="#meta" class="anchor"></a>Meta</h3>
<ul>
<li>Please report any <a href="https://github.com/andschar/standartox/issues">issues, bugs or feature requests</a>
</li>
<li>License: MIT</li>
<li>Get citation information for the standartox package in R doing <code><a href="https://rdrr.io/r/utils/citation.html">citation(package = 'standartox')</a></code>
</li>
</ul>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/andschar/standartox/">https://​github.com/​andschar/​standartox/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/andschar/standartox/issues">https://​github.com/​andschar/​standartox/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Andreas Scharmüller <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=standartox"><img src="http://www.r-pkg.org/badges/version-ago/standartox" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=standartox"><img src="http://cranlogs.r-pkg.org/badges/last-month/standartox" alt="CRAN_Downloads_Badge"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Andreas Scharmüller.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
